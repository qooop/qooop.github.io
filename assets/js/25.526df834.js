(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{397:function(s,a,e){"use strict";e.r(a);var t=e(44),l=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"mysql8使用简单密码"}},[s._v("mysql8使用简单密码")]),s._v(" "),e("h3",{attrs:{id:"mysql8的安装及启动"}},[s._v("mysql8的安装及启动")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y mysql-community-server mysql-community-client\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"获取初始密码"}},[s._v("获取初始密码")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -r password /var/log/mysqld.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("打印如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("2021-11-01T01:35:40.714671Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: ahuqD4G#9uH:\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("最后一部分就是初始密码了，使用这个密码登录mysql。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("mysql -u root -pahuqD4G"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#9uH:")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"修改初始密码"}},[s._v("修改初始密码")]),s._v(" "),e("p",[s._v("初始密码需要符合复杂的密码策略，但是修改密码策略之前必须要先修改初始密码。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("alter user 'root'@'localhost' identified by '复杂密码';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"查看密码策略"}},[s._v("查看密码策略")]),s._v(" "),e("p",[s._v("使用如下命令可以查询默认的密码策略：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql>  show variables like 'validate_password%';\n+--------------------------------------+--------+\n| Variable_name                        | Value  |\n+--------------------------------------+--------+\n| validate_password.check_user_name    | ON     |\n| validate_password.dictionary_file    |        |\n| validate_password.length             | 8      |\n| validate_password.mixed_case_count   | 1      |\n| validate_password.number_count       | 1      |\n| validate_password.policy             | MEDIUM |\n| validate_password.special_char_count | 1      |\n+--------------------------------------+--------+\n7 rows in set (0.03 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("变量说明如下：")]),s._v(" "),e("ul",[e("li",[s._v("validate_password.check_user_name 检查用户名，设置为OFF时可以使用用户名作为密码。")]),s._v(" "),e("li",[s._v("validate_password.dictionary_file 插件用于验证密码强度的字典文件路径")]),s._v(" "),e("li",[s._v("validate_password.length 密码最小长度")]),s._v(" "),e("li",[s._v("validate_password.mixed_case_count 密码至少要包含大小写混合字母个数")]),s._v(" "),e("li",[s._v("validate_password.number_count 密码至少要包含的数字个数")]),s._v(" "),e("li",[s._v("validate_password.policy 密码校验策略")]),s._v(" "),e("li",[s._v("validate_password.special_char_count 密码至少要包含的特殊字符数")])]),s._v(" "),e("p",[s._v("validate_password.policy的取值说明")]),s._v(" "),e("ul",[e("li",[s._v("0/LOW 只检查长度")]),s._v(" "),e("li",[s._v("1/MEDIUM 检查长度、数字、大小写、特殊字符")]),s._v(" "),e("li",[s._v("2/STRONG 检查长度、数字、大小写、特殊字符字典文件")])]),s._v(" "),e("blockquote",[e("p",[s._v("mysql8和mysql5.7版本中，变量名略有不同，5.7版本中，所有变量都是下划线分隔的：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("validate_password_check_user_name\nvalidate_password_dictionary_file\nvalidate_password_length\nvalidate_password_mixed_case_count\nvalidate_password_number_count\nvalidate_password_policy\nvalidate_password_special_char_count\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])]),s._v(" "),e("h3",{attrs:{id:"修改密码策略"}},[s._v("修改密码策略")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("set global validate_password.policy=0;\nset global validate_password.length=1;\nset global validate_password.check_user_name='OFF';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("这里调整后的密码策略为只校验长度，且最小长度为1，允许将用户名作为密码。")]),s._v(" "),e("h3",{attrs:{id:"使用简易密码"}},[s._v("使用简易密码")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("alter user 'root'@'localhost' identified by 'root';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=l.exports}}]);