(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{398:function(s,t,e){"use strict";e.r(t);var n=e(44),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"ä½¿ç”¨chrooté™åˆ¶sshç”¨æˆ·"}},[s._v("ä½¿ç”¨chrooté™åˆ¶sshç”¨æˆ·")]),s._v(" "),e("h3",{attrs:{id:"ç¯å¢ƒå‡†å¤‡"}},[s._v("ç¯å¢ƒå‡†å¤‡")]),s._v(" "),e("p",[s._v("åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡ä¸€ä¸ªå¯ä»¥chrootçš„ç³»ç»Ÿï¼›å…³äºå¦‚ä½•åˆ›å»ºè¿™æ ·çš„ç³»ç»Ÿï¼Œè¯·å‚è€ƒå¦å¤–ä¸€ç‰‡æ–‡ç« "),e("RouterLink",{attrs:{to:"/blogs/2021100901.html"}},[s._v("ã€Šä½¿ç”¨supermin5åˆ›å»ºä¸€ä¸ªå¯ä»¥chrootçš„ç³»ç»Ÿã€‹")]),s._v("ã€‚")],1),s._v(" "),e("p",[s._v("å‡è®¾æ‚¨å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ªå¯ä»¥chrootçš„ç›®å½•ï¼Œæœ¬æ–‡ä¸­æˆ‘ä»¬ä»¥â€œtestç³»ç»Ÿâ€æ¥ç§°å‘¼è¿™ä¸ªç›®å½•ï¼Œå¹¶ä¸”testç³»ç»Ÿä½äº/data/chroot/testç›®å½•ï¼Œæœ¬æ–‡ä»¥testç”¨æˆ·ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨chrooté™åˆ¶testç”¨æˆ·ç™»å½•åçš„ç›®å½•ã€‚")]),s._v(" "),e("h3",{attrs:{id:"åˆ›å»ºç™»å½•ç”¨æˆ·"}},[s._v("åˆ›å»ºç™»å½•ç”¨æˆ·")]),s._v(" "),e("p",[s._v("å®¿ä¸»æœºå™¨å¢åŠ testç”¨æˆ·ï¼Œå¹¶è®¾ç½®ç™»å½•å¯†ç ã€‚-Må‚æ•°è¡¨ç¤ºä¸åˆ›å»ºç”¨æˆ·å®¶ç›®å½•ã€‚")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -M "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("åœ¨testç³»ç»Ÿä¸­å¢åŠ testç”¨æˆ·ï¼Œå¹¶åˆ›å»ºå®¶ç›®å½•ã€‚")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–¹æ³•1ï¼šchrootåˆ°testç³»ç»Ÿï¼Œå†æ‰§è¡Œå¢åŠ ç”¨æˆ·å‘½ä»¤")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chroot")]),s._v(" /data/chroot/test\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–¹æ³•2ï¼šç›´æ¥åœ¨å®¿ä¸»æœºå™¨ä¸Šæ‰§è¡Œå¢åŠ ç”¨æˆ·å‘½ä»¤å¹¶æŒ‡å®š-R/--rootå‚æ•°")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -R /data/chroot/test\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("blockquote",[e("p",[s._v("-R, --rootå‚æ•°æŒ‡å®štestç³»ç»Ÿçš„ç›®å½•ï¼Œè¡¨ç¤ºä¿®æ”¹æ­¤ç›®å½•ä¸‹çš„ç›¸å…³é…ç½®æ–‡ä»¶")])]),s._v(" "),e("h3",{attrs:{id:"sshdæœåŠ¡é…ç½®"}},[s._v("sshdæœåŠ¡é…ç½®")]),s._v(" "),e("p",[s._v("ä¿®æ”¹å®¿ä¸»æœºå™¨çš„sshdæœåŠ¡é…ç½®æ–‡ä»¶/etc/ssh/sshd_configï¼Œåœ¨æ–‡ä»¶æœ«å°¾å¢åŠ ä»¥ä¸‹ä»£ç ã€‚")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("Match User "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n    ChrootDirectory /data/chroot/test\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("Match Userè¡¨ç¤ºåŒ¹é…ç”¨æˆ·ï¼Œæ­¤å¤„åŒ¹é…testç”¨æˆ·ã€‚")]),s._v(" "),e("li",[s._v("Matchä¸‹æ–¹çš„é…ç½®æ˜¯è¯¥ç”¨æˆ·ç‰¹æœ‰çš„é…ç½®ï¼Œæ‰€ä»¥è¿™æ®µé…ç½®ä¸€å®šè¦æ”¾åœ¨æ–‡ä»¶æœ«å°¾ï¼Œæ­¤å¤„ç¼©è¿›ä¸€æ ¼æ–¹ä¾¿æŸ¥çœ‹ã€‚")]),s._v(" "),e("li",[s._v("ChrootDirectoryè¡¨ç¤ºå¼€å¯chrootåŠŸèƒ½å¹¶æŒ‡å®štestç³»ç»Ÿæ‰€åœ¨ç›®å½•ã€‚")])]),s._v(" "),e("p",[s._v("ä¿®æ”¹å®Œæˆåï¼Œé‡å¯sshdæœåŠ¡ã€‚")]),s._v(" "),e("blockquote",[e("p",[s._v("é‡å¯sshdæœåŠ¡ä¹‹å‰ï¼ŒåŠ¡å¿…ä¿è¯æœ‰å…¶ä»–æ–¹å¼å¯ä»¥è·å–åˆ°æœåŠ¡å™¨çš„shellï¼Œé˜²æ­¢sshdæœåŠ¡é‡å¯å¤±è´¥å¯¼è‡´æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨çš„å°´å°¬æƒ…å†µğŸ˜…ã€‚")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd restart\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æˆ–è€…")]),s._v("\nsystemctl restart sshd.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("å¦‚æœéœ€è¦å°†å¤šä¸ªç”¨æˆ·é™åˆ¶åœ¨ä¸åŒæˆ–ç›¸åŒç›®å½•ï¼Œé‡å¤ä»¥ä¸Šä¸¤æ­¥éª¤ï¼Œé…ç½®å¤šä¸ªMatch Userç‰‡æ®µå³å¯å®ç°ã€‚")]),s._v(" "),e("h3",{attrs:{id:"ä¿®æ”¹-dev-nullæ–‡ä»¶æƒé™"}},[s._v("ä¿®æ”¹/dev/nullæ–‡ä»¶æƒé™")]),s._v(" "),e("p",[s._v("å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œå…¶å®testç”¨æˆ·å°±å·²ç»å¯ä»¥ç™»å½•äº†ï¼Œåªæ˜¯ç™»å½•åshellä¼šæŠ¥é”™ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Â» ssh test@localhost\ntest@localhost's password: \nLast login: Sun Oct 31 18:39:30 2021 from gateway\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n-bash: /dev/null: Permission denied\n[test@localhost ~]$ \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦ä¿®æ”¹/dev/nullçš„æƒé™ä¸ºä»»ä½•äººå¯ä»¥è¯»å†™å³å¯ã€‚")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chroot")]),s._v(" /data/chroot/test\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /dev/null\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("(å®Œ)")])])}),[],!1,null,null,null);t.default=a.exports}}]);